!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";Zone.__load_patch("Error",function(t,e,r){function n(){var t=this,e=o.apply(this,arguments),i=e.originalStack=e.stack;if(n[f]&&i){for(var s=i.split("\n"),k=r.currentZoneFrame(),p=0;s[p]!==a&&s[p]!==c&&p<s.length;)p++;for(;p<s.length&&k;p++){var l=s[p];if(l.trim())switch(u[l]){case 0:s.splice(p,1),p--;break;case 1:k=k.parent?k.parent:null,s.splice(p,1),p--;break;default:s[p]+=" ["+k.zone.name+"]"}}try{e.stack=e.zoneAwareStack=s.join("\n")}catch(d){}}return this instanceof o&&this.constructor!=o?(Object.keys(e).concat("stack","message").forEach(function(r){if(void 0!==e[r])try{t[r]=e[r]}catch(n){}}),this):e}var a,c,i=r.symbol("blacklistedStackFrames"),o=t[r.symbol("Error")]=t.Error,u={};t.Error=n;var f="stackRewrite";n.prototype=o.prototype,n[i]=u,n[f]=!1;var s=["stackTraceLimit","captureStackTrace","prepareStackTrace"],k=Object.keys(o);k&&k.forEach(function(t){0===s.filter(function(e){return e===t}).length&&Object.defineProperty(n,t,{get:function(){return o[t]},set:function(e){o[t]=e}})}),o.hasOwnProperty("stackTraceLimit")&&(o.stackTraceLimit=Math.max(o.stackTraceLimit,15),Object.defineProperty(n,"stackTraceLimit",{get:function(){return o.stackTraceLimit},set:function(t){return o.stackTraceLimit=t}})),o.hasOwnProperty("captureStackTrace")&&Object.defineProperty(n,"captureStackTrace",{value:function(t,e){o.captureStackTrace(t,e)}}),Object.defineProperty(n,"prepareStackTrace",{get:function(){return o.prepareStackTrace},set:function(t){return t&&"function"==typeof t?o.prepareStackTrace=function(e,r){if(r)for(var n=0;n<r.length;n++){var a=r[n];if("zoneCaptureStackTrace"===a.getFunctionName()){r.splice(n,1);break}}return t.apply(this,[e,r])}:o.prepareStackTrace=t}});var p=e.current.fork({name:"detect",onHandleError:function(t,e,r,i){if(i.originalStack&&Error===n)for(var o=i.originalStack.split(/\n/),s=!1,k=!1,p=!1;o.length;){var l=o.shift();if(/:\d+:\d+/.test(l)){var d=l.split("(")[0].split("@")[0],T=1;if(d.indexOf("ZoneAwareError")!==-1&&(a=l,c=l.replace("Error.",""),u[c]=0),d.indexOf("runGuarded")!==-1?k=!0:d.indexOf("runTask")!==-1?p=!0:d.indexOf("run")!==-1?s=!0:T=0,u[l]=T,s&&k&&p){n[f]=!0;break}}}return!1}}),l=p.fork({name:"child",onScheduleTask:function(t,e,r,n){return t.scheduleTask(r,n)},onInvokeTask:function(t,e,r,n,a,c){return t.invokeTask(r,n,a,c)},onCancelTask:function(t,e,r,n){return t.cancelTask(r,n)},onInvoke:function(t,e,r,n,a,c,i){return t.invoke(r,n,a,c,i)}}),d=Error.stackTraceLimit;Error.stackTraceLimit=100,l.run(function(){l.runGuarded(function(){var t=function(t,e,r){};l.scheduleEventTask(i,function(){l.scheduleMacroTask(i,function(){l.scheduleMicroTask(i,function(){throw new n(n,o)},null,function(e){e._transitionTo=t,e.invoke()})},null,function(e){e._transitionTo=t,e.invoke()},function(){})},null,function(e){e._transitionTo=t,e.invoke()},function(){})})}),Error.stackTraceLimit=d})});