{"version":3,"file":"web_animations_driver.js","sourceRoot":"","sources":["../../../../../modules/@angular/platform-browser/src/dom/web_animations_driver.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {AnimationPlayer} from '@angular/core';\nimport {isPresent} from '../facade/lang';\nimport {AnimationKeyframe, AnimationStyles} from '../private_import_core';\n\nimport {AnimationDriver} from './animation_driver';\nimport {WebAnimationsPlayer} from './web_animations_player';\nexport class WebAnimationsDriver implements AnimationDriver {\n/**\n * @param {?} element\n * @param {?} startingStyles\n * @param {?} keyframes\n * @param {?} duration\n * @param {?} delay\n * @param {?} easing\n * @param {?=} previousPlayers\n * @return {?}\n */\nanimate(\n      element: any, startingStyles: AnimationStyles, keyframes: AnimationKeyframe[],\n      duration: number, delay: number, easing: string,\n      previousPlayers: AnimationPlayer[] = []): WebAnimationsPlayer {\n    let /** @type {?} */ formattedSteps: {[key: string]: string | number}[] = [];\n    let /** @type {?} */ startingStyleLookup: {[key: string]: string | number} = {};\n    if (isPresent(startingStyles)) {\n      startingStyleLookup = _populateStyles(startingStyles, {});\n    }\n\n    keyframes.forEach((keyframe: AnimationKeyframe) => {\n      const /** @type {?} */ data = _populateStyles(keyframe.styles, startingStyleLookup);\n      data['offset'] = Math.max(0, Math.min(1, keyframe.offset));\n      formattedSteps.push(data);\n    });\n\n    // Styling passed into element.animate() must always be balanced.\n    // The special cases below can occur if only style() calls exist\n    // within an animation or when a style() calls are used prior\n    // to a group() animation being issued or if the renderer is\n    // invoked by the user directly.\n    if (formattedSteps.length == 0) {\n      formattedSteps = [startingStyleLookup, startingStyleLookup];\n    } else if (formattedSteps.length == 1) {\n      const /** @type {?} */ start = startingStyleLookup;\n      const /** @type {?} */ end = formattedSteps[0];\n      end['offset'] = null;\n      formattedSteps = [start, end];\n    }\n\n    const /** @type {?} */ playerOptions: {[key: string]: string | number} = {\n      'duration': duration,\n      'delay': delay,\n      'fill': 'both'  // we use `both` because it allows for styling at 0% to work with `delay`\n    };\n\n    // we check for this to avoid having a null|undefined value be present\n    // for the easing (which results in an error for certain browsers #9752)\n    if (easing) {\n      playerOptions['easing'] = easing;\n    }\n\n    // there may be a chance a NoOp player is returned depending\n    // on when the previous animation was cancelled\n    previousPlayers = previousPlayers.filter(filterWebAnimationPlayerFn);\n    return new WebAnimationsPlayer(\n        element, formattedSteps, playerOptions, /** @type {?} */(( <WebAnimationsPlayer[]>previousPlayers)));\n  }\n}\n/**\n * @param {?} styles\n * @param {?} defaultStyles\n * @return {?}\n */\nfunction _populateStyles(styles: AnimationStyles, defaultStyles: {[key: string]: string | number}):\n    {[key: string]: string | number} {\n  const /** @type {?} */ data: {[key: string]: string | number} = {};\n  styles.styles.forEach(\n      (entry) => { Object.keys(entry).forEach(prop => { data[prop] = entry[prop]; }); });\n  Object.keys(defaultStyles).forEach(prop => {\n    if (!isPresent(data[prop])) {\n      data[prop] = defaultStyles[prop];\n    }\n  });\n  return data;\n}\n/**\n * @param {?} player\n * @return {?}\n */\nfunction filterWebAnimationPlayerFn(player: AnimationPlayer) {\n  return player instanceof WebAnimationsPlayer;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}