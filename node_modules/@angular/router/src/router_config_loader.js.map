{"version":3,"file":"router_config_loader.js","sourceRoot":"","sources":["../../../../modules/@angular/router/src/router_config_loader.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Compiler, ComponentFactoryResolver, Injector, NgModuleFactory, NgModuleFactoryLoader, OpaqueToken} from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport {fromPromise} from 'rxjs/observable/fromPromise';\nimport {of } from 'rxjs/observable/of';\nimport {map} from 'rxjs/operator/map';\nimport {mergeMap} from 'rxjs/operator/mergeMap';\n\nimport {LoadChildren, Route} from './config';\nimport {flatten, wrapIntoObservable} from './utils/collection';\n\n/**\n * @experimental\n */\nexport const /** @type {?} */ ROUTES = new OpaqueToken('ROUTES');\nexport class LoadedRouterConfig {\n/**\n * @param {?} routes\n * @param {?} injector\n * @param {?} factoryResolver\n * @param {?} injectorFactory\n */\nconstructor(\npublic routes: Route[],\npublic injector: Injector,\npublic factoryResolver: ComponentFactoryResolver,\npublic injectorFactory: Function) {}\n}\n\nfunction LoadedRouterConfig_tsickle_Closure_declarations() {\n/** @type {?} */\nLoadedRouterConfig.prototype.routes;\n/** @type {?} */\nLoadedRouterConfig.prototype.injector;\n/** @type {?} */\nLoadedRouterConfig.prototype.factoryResolver;\n/** @type {?} */\nLoadedRouterConfig.prototype.injectorFactory;\n}\n\nexport class RouterConfigLoader {\n/**\n * @param {?} loader\n * @param {?} compiler\n */\nconstructor(private loader: NgModuleFactoryLoader,\nprivate compiler: Compiler) {}\n/**\n * @param {?} parentInjector\n * @param {?} loadChildren\n * @return {?}\n */\nload(parentInjector: Injector, loadChildren: LoadChildren): Observable<LoadedRouterConfig> {\n    return map.call(this.loadModuleFactory(loadChildren), (r: NgModuleFactory<any>) => {\n      const /** @type {?} */ ref = r.create(parentInjector);\n      const /** @type {?} */ injectorFactory = (parent: Injector) => r.create(parent).injector;\n      return new LoadedRouterConfig(\n          flatten(ref.injector.get(ROUTES)), ref.injector, ref.componentFactoryResolver,\n          injectorFactory);\n    });\n  }\n/**\n * @param {?} loadChildren\n * @return {?}\n */\nprivate loadModuleFactory(loadChildren: LoadChildren): Observable<NgModuleFactory<any>> {\n    if (typeof loadChildren === 'string') {\n      return fromPromise(this.loader.load(loadChildren));\n    } else {\n      return mergeMap.call(wrapIntoObservable(loadChildren()), (t: NgModuleFactory<any>| any) => {\n        if (t instanceof NgModuleFactory) {\n          return of (t);\n        } else {\n          return fromPromise(this.compiler.compileModuleAsync(t));\n        }\n      });\n    }\n  }\n}\n\nfunction RouterConfigLoader_tsickle_Closure_declarations() {\n/** @type {?} */\nRouterConfigLoader.prototype.loader;\n/** @type {?} */\nRouterConfigLoader.prototype.compiler;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}