{"version":3,"file":"validators.js","sourceRoot":"","sources":["../../../../modules/@angular/forms/src/validators.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {OpaqueToken} from '@angular/core';\nimport {toPromise} from 'rxjs/operator/toPromise';\nimport {AsyncValidatorFn, ValidatorFn} from './directives/validators';\nimport {StringMapWrapper} from './facade/collection';\nimport {isPresent} from './facade/lang';\nimport {AbstractControl} from './model';\nimport {isPromise} from './private_import_core';\n/**\n * @param {?} value\n * @return {?}\n */\nfunction isEmptyInputValue(value: any): boolean {\n  // we don't check for string here so it also works with arrays\n  return value == null || value.length === 0;\n}\n\n/**\n * Providers for validators to be used for {@link FormControl}s in a form.\n *\n * Provide this using `multi: true` to add validators.\n *\n * ### Example\n *\n * {@example core/forms/ts/ng_validators/ng_validators.ts region='ng_validators'}\n * @stable\n */\nexport const /** @type {?} */ NG_VALIDATORS: OpaqueToken = new OpaqueToken('NgValidators');\n\n/**\n * Providers for asynchronous validators to be used for {@link FormControl}s\n * in a form.\n *\n * Provide this using `multi: true` to add validators.\n *\n * See {@link NG_VALIDATORS} for more details.\n *\n * @stable\n */\nexport const /** @type {?} */ NG_ASYNC_VALIDATORS: OpaqueToken = new OpaqueToken('NgAsyncValidators');\n/**\n * Provides a set of validators used by form controls.\n * \n * A validator is a function that processes a {\\@link FormControl} or collection of\n * controls and returns a map of errors. A null map means that validation has passed.\n * \n * ### Example\n * \n * ```typescript\n * var loginControl = new FormControl(\"\", Validators.required)\n * ```\n * \n * \\@stable\n */\nexport class Validators {\n/**\n * Validator that requires controls to have a non-empty value.\n * @param {?} control\n * @return {?}\n */\nstatic required(control: AbstractControl): {[key: string]: boolean} {\n    return isEmptyInputValue(control.value) ? {'required': true} : null;\n  }\n/**\n * Validator that requires control value to be true.\n * @param {?} control\n * @return {?}\n */\nstatic requiredTrue(control: AbstractControl): {[key: string]: boolean} {\n    return control.value === true ? null : {'required': true};\n  }\n/**\n * Validator that requires controls to have a value of a minimum length.\n * @param {?} minLength\n * @return {?}\n */\nstatic minLength(minLength: number): ValidatorFn {\n    return (control: AbstractControl): {[key: string]: any} => {\n      if (isEmptyInputValue(control.value)) {\n        return null;  // don't validate empty values to allow optional controls\n      }\n      const /** @type {?} */ length: number = control.value ? control.value.length : 0;\n      return length < minLength ?\n          {'minlength': {'requiredLength': minLength, 'actualLength': length}} :\n          null;\n    };\n  }\n/**\n * Validator that requires controls to have a value of a maximum length.\n * @param {?} maxLength\n * @return {?}\n */\nstatic maxLength(maxLength: number): ValidatorFn {\n    return (control: AbstractControl): {[key: string]: any} => {\n      const /** @type {?} */ length: number = control.value ? control.value.length : 0;\n      return length > maxLength ?\n          {'maxlength': {'requiredLength': maxLength, 'actualLength': length}} :\n          null;\n    };\n  }\n/**\n * Validator that requires a control to match a regex to its value.\n * @param {?} pattern\n * @return {?}\n */\nstatic pattern(pattern: string|RegExp): ValidatorFn {\n    if (!pattern) return Validators.nullValidator;\n    let /** @type {?} */ regex: RegExp;\n    let /** @type {?} */ regexStr: string;\n    if (typeof pattern === 'string') {\n      regexStr = `^${pattern}$`;\n      regex = new RegExp(regexStr);\n    } else {\n      regexStr = pattern.toString();\n      regex = pattern;\n    }\n    return (control: AbstractControl): {[key: string]: any} => {\n      if (isEmptyInputValue(control.value)) {\n        return null;  // don't validate empty values to allow optional controls\n      }\n      const /** @type {?} */ value: string = control.value;\n      return regex.test(value) ? null :\n                                 {'pattern': {'requiredPattern': regexStr, 'actualValue': value}};\n    };\n  }\n/**\n * No-op validator.\n * @param {?} c\n * @return {?}\n */\nstatic nullValidator(c: AbstractControl): {[key: string]: boolean} { return null; }\n/**\n * Compose multiple validators into a single function that returns the union\n * of the individual error maps.\n * @param {?} validators\n * @return {?}\n */\nstatic compose(validators: ValidatorFn[]): ValidatorFn {\n    if (!validators) return null;\n    const /** @type {?} */ presentValidators = validators.filter(isPresent);\n    if (presentValidators.length == 0) return null;\n\n    return function(control: AbstractControl) {\n      return _mergeErrors(_executeValidators(control, presentValidators));\n    };\n  }\n/**\n * @param {?} validators\n * @return {?}\n */\nstatic composeAsync(validators: AsyncValidatorFn[]): AsyncValidatorFn {\n    if (!validators) return null;\n    const /** @type {?} */ presentValidators = validators.filter(isPresent);\n    if (presentValidators.length == 0) return null;\n\n    return function(control: AbstractControl) {\n      const /** @type {?} */ promises = _executeAsyncValidators(control, presentValidators).map(_convertToPromise);\n      return Promise.all(promises).then(_mergeErrors);\n    };\n  }\n}\n/**\n * @param {?} obj\n * @return {?}\n */\nfunction _convertToPromise(obj: any): Promise<any> {\n  return isPromise(obj) ? obj : toPromise.call(obj);\n}\n/**\n * @param {?} control\n * @param {?} validators\n * @return {?}\n */\nfunction _executeValidators(control: AbstractControl, validators: ValidatorFn[]): any[] {\n  return validators.map(v => v(control));\n}\n/**\n * @param {?} control\n * @param {?} validators\n * @return {?}\n */\nfunction _executeAsyncValidators(control: AbstractControl, validators: AsyncValidatorFn[]): any[] {\n  return validators.map(v => v(control));\n}\n/**\n * @param {?} arrayOfErrors\n * @return {?}\n */\nfunction _mergeErrors(arrayOfErrors: any[]): {[key: string]: any} {\n  const /** @type {?} */ res: {[key: string]: any} =\n      arrayOfErrors.reduce((res: {[key: string]: any}, errors: {[key: string]: any}) => {\n        return isPresent(errors) ? StringMapWrapper.merge(res, errors) : res;\n      }, {});\n  return Object.keys(res).length === 0 ? null : res;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}