{"version":3,"file":"animation_compiler.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/animation/animation_compiler.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nimport {isPresent} from '../facade/lang';\nimport {Identifiers, createIdentifier} from '../identifiers';\nimport * as o from '../output/output_ast';\nimport {ANY_STATE, DEFAULT_STATE, EMPTY_STATE} from '../private_import_core';\n\nimport {AnimationAst, AnimationAstVisitor, AnimationEntryAst, AnimationGroupAst, AnimationKeyframeAst, AnimationSequenceAst, AnimationStateDeclarationAst, AnimationStateTransitionAst, AnimationStepAst, AnimationStylesAst} from './animation_ast';\nexport class AnimationEntryCompileResult {\n/**\n * @param {?} name\n * @param {?} statements\n * @param {?} fnExp\n */\nconstructor(public name: string,\npublic statements: o.Statement[],\npublic fnExp: o.Expression) {}\n}\n\nfunction AnimationEntryCompileResult_tsickle_Closure_declarations() {\n/** @type {?} */\nAnimationEntryCompileResult.prototype.name;\n/** @type {?} */\nAnimationEntryCompileResult.prototype.statements;\n/** @type {?} */\nAnimationEntryCompileResult.prototype.fnExp;\n}\n\nexport class AnimationCompiler {\n/**\n * @param {?} factoryNamePrefix\n * @param {?} parsedAnimations\n * @return {?}\n */\ncompile(factoryNamePrefix: string, parsedAnimations: AnimationEntryAst[]):\n      AnimationEntryCompileResult[] {\n    return parsedAnimations.map(entry => {\n      const /** @type {?} */ factoryName = `${factoryNamePrefix}_${entry.name}`;\n      const /** @type {?} */ visitor = new _AnimationBuilder(entry.name, factoryName);\n      return visitor.build(entry);\n    });\n  }\n}\n\nconst /** @type {?} */ _ANIMATION_FACTORY_ELEMENT_VAR = o.variable('element');\nconst /** @type {?} */ _ANIMATION_DEFAULT_STATE_VAR = o.variable('defaultStateStyles');\nconst /** @type {?} */ _ANIMATION_FACTORY_VIEW_VAR = o.variable('view');\nconst /** @type {?} */ _ANIMATION_FACTORY_VIEW_CONTEXT = _ANIMATION_FACTORY_VIEW_VAR.prop('animationContext');\nconst /** @type {?} */ _ANIMATION_FACTORY_RENDERER_VAR = _ANIMATION_FACTORY_VIEW_VAR.prop('renderer');\nconst /** @type {?} */ _ANIMATION_CURRENT_STATE_VAR = o.variable('currentState');\nconst /** @type {?} */ _ANIMATION_NEXT_STATE_VAR = o.variable('nextState');\nconst /** @type {?} */ _ANIMATION_PLAYER_VAR = o.variable('player');\nconst /** @type {?} */ _ANIMATION_TIME_VAR = o.variable('totalTime');\nconst /** @type {?} */ _ANIMATION_START_STATE_STYLES_VAR = o.variable('startStateStyles');\nconst /** @type {?} */ _ANIMATION_END_STATE_STYLES_VAR = o.variable('endStateStyles');\nconst /** @type {?} */ _ANIMATION_COLLECTED_STYLES = o.variable('collectedStyles');\nconst /** @type {?} */ _PREVIOUS_ANIMATION_PLAYERS = o.variable('previousPlayers');\nconst /** @type {?} */ _EMPTY_MAP = o.literalMap([]);\nconst /** @type {?} */ _EMPTY_ARRAY = o.literalArr([]);\nclass _AnimationBuilder implements AnimationAstVisitor {\nprivate _fnVarName: string;\nprivate _statesMapVarName: string;\nprivate _statesMapVar: any;\n/**\n * @param {?} animationName\n * @param {?} factoryName\n */\nconstructor(public animationName: string, factoryName: string) {\n    this._fnVarName = factoryName + '_factory';\n    this._statesMapVarName = factoryName + '_states';\n    this._statesMapVar = o.variable(this._statesMapVarName);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationStyles(ast: AnimationStylesAst, context: _AnimationBuilderContext): o.Expression {\n    const /** @type {?} */ stylesArr: any[] = [];\n    if (context.isExpectingFirstStyleStep) {\n      stylesArr.push(_ANIMATION_START_STATE_STYLES_VAR);\n      context.isExpectingFirstStyleStep = false;\n    }\n\n    ast.styles.forEach(entry => {\n      const /** @type {?} */ entries =\n          Object.keys(entry).map((key): [string, o.Expression] => [key, o.literal(entry[key])]);\n      stylesArr.push(o.literalMap(entries, null, true));\n    });\n\n    return o.importExpr(createIdentifier(Identifiers.AnimationStyles)).instantiate([\n      o.importExpr(createIdentifier(Identifiers.collectAndResolveStyles)).callFn([\n        _ANIMATION_COLLECTED_STYLES, o.literalArr(stylesArr)\n      ])\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationKeyframe(ast: AnimationKeyframeAst, context: _AnimationBuilderContext):\n      o.Expression {\n    return o.importExpr(createIdentifier(Identifiers.AnimationKeyframe)).instantiate([\n      o.literal(ast.offset), ast.styles.visit(this, context)\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationStep(ast: AnimationStepAst, context: _AnimationBuilderContext): o.Expression {\n    if (context.endStateAnimateStep === ast) {\n      return this._visitEndStateAnimation(ast, context);\n    }\n\n    const /** @type {?} */ startingStylesExpr = ast.startingStyles.visit(this, context);\n    const /** @type {?} */ keyframeExpressions =\n        ast.keyframes.map(keyframeEntry => keyframeEntry.visit(this, context));\n    return this._callAnimateMethod(\n        ast, startingStylesExpr, o.literalArr(keyframeExpressions), context);\n  }\n/**\n * \\@internal\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\n_visitEndStateAnimation(ast: AnimationStepAst, context: _AnimationBuilderContext): o.Expression {\n    const /** @type {?} */ startingStylesExpr = ast.startingStyles.visit(this, context);\n    const /** @type {?} */ keyframeExpressions = ast.keyframes.map(keyframe => keyframe.visit(this, context));\n    const /** @type {?} */ keyframesExpr =\n        o.importExpr(createIdentifier(Identifiers.balanceAnimationKeyframes)).callFn([\n          _ANIMATION_COLLECTED_STYLES, _ANIMATION_END_STATE_STYLES_VAR,\n          o.literalArr(keyframeExpressions)\n        ]);\n\n    return this._callAnimateMethod(ast, startingStylesExpr, keyframesExpr, context);\n  }\n/**\n * \\@internal\n * @param {?} ast\n * @param {?} startingStylesExpr\n * @param {?} keyframesExpr\n * @param {?} context\n * @return {?}\n */\n_callAnimateMethod(\n      ast: AnimationStepAst, startingStylesExpr: any, keyframesExpr: any,\n      context: _AnimationBuilderContext) {\n    let /** @type {?} */ previousStylesValue: o.Expression = _EMPTY_ARRAY;\n    if (context.isExpectingFirstAnimateStep) {\n      previousStylesValue = _PREVIOUS_ANIMATION_PLAYERS;\n      context.isExpectingFirstAnimateStep = false;\n    }\n    context.totalTransitionTime += ast.duration + ast.delay;\n    return _ANIMATION_FACTORY_RENDERER_VAR.callMethod('animate', [\n      _ANIMATION_FACTORY_ELEMENT_VAR, startingStylesExpr, keyframesExpr, o.literal(ast.duration),\n      o.literal(ast.delay), o.literal(ast.easing), previousStylesValue\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationSequence(ast: AnimationSequenceAst, context: _AnimationBuilderContext):\n      o.Expression {\n    const /** @type {?} */ playerExprs = ast.steps.map(step => step.visit(this, context));\n    return o.importExpr(createIdentifier(Identifiers.AnimationSequencePlayer)).instantiate([\n      o.literalArr(playerExprs)\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationGroup(ast: AnimationGroupAst, context: _AnimationBuilderContext): o.Expression {\n    const /** @type {?} */ playerExprs = ast.steps.map(step => step.visit(this, context));\n    return o.importExpr(createIdentifier(Identifiers.AnimationGroupPlayer)).instantiate([\n      o.literalArr(playerExprs)\n    ]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationStateDeclaration(\n      ast: AnimationStateDeclarationAst, context: _AnimationBuilderContext): void {\n    const /** @type {?} */ flatStyles: {[key: string]: string | number} = {};\n    _getStylesArray(ast).forEach(\n        entry => { Object.keys(entry).forEach(key => { flatStyles[key] = entry[key]; }); });\n    context.stateMap.registerState(ast.stateName, flatStyles);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationStateTransition(\n      ast: AnimationStateTransitionAst, context: _AnimationBuilderContext): any {\n    const /** @type {?} */ steps = ast.animation.steps;\n    const /** @type {?} */ lastStep = steps[steps.length - 1];\n    if (_isEndStateAnimateStep(lastStep)) {\n      context.endStateAnimateStep = /** @type {?} */(( <AnimationStepAst>lastStep));\n    }\n\n    context.totalTransitionTime = 0;\n    context.isExpectingFirstStyleStep = true;\n    context.isExpectingFirstAnimateStep = true;\n\n    const /** @type {?} */ stateChangePreconditions: o.Expression[] = [];\n\n    ast.stateChanges.forEach(stateChange => {\n      stateChangePreconditions.push(\n          _compareToAnimationStateExpr(_ANIMATION_CURRENT_STATE_VAR, stateChange.fromState)\n              .and(_compareToAnimationStateExpr(_ANIMATION_NEXT_STATE_VAR, stateChange.toState)));\n\n      if (stateChange.fromState != ANY_STATE) {\n        context.stateMap.registerState(stateChange.fromState);\n      }\n\n      if (stateChange.toState != ANY_STATE) {\n        context.stateMap.registerState(stateChange.toState);\n      }\n    });\n\n    const /** @type {?} */ animationPlayerExpr = ast.animation.visit(this, context);\n\n    const /** @type {?} */ reducedStateChangesPrecondition = stateChangePreconditions.reduce((a, b) => a.or(b));\n    const /** @type {?} */ precondition =\n        _ANIMATION_PLAYER_VAR.equals(o.NULL_EXPR).and(reducedStateChangesPrecondition);\n\n    const /** @type {?} */ animationStmt = _ANIMATION_PLAYER_VAR.set(animationPlayerExpr).toStmt();\n    const /** @type {?} */ totalTimeStmt = _ANIMATION_TIME_VAR.set(o.literal(context.totalTransitionTime)).toStmt();\n\n    return new o.IfStmt(precondition, [animationStmt, totalTimeStmt]);\n  }\n/**\n * @param {?} ast\n * @param {?} context\n * @return {?}\n */\nvisitAnimationEntry(ast: AnimationEntryAst, context: _AnimationBuilderContext): any {\n    // visit each of the declarations first to build the context state map\n    ast.stateDeclarations.forEach(def => def.visit(this, context));\n\n    // this should always be defined even if the user overrides it\n    context.stateMap.registerState(DEFAULT_STATE, {});\n\n    const /** @type {?} */ statements: o.Statement[] = [];\n    statements.push(_PREVIOUS_ANIMATION_PLAYERS\n                        .set(_ANIMATION_FACTORY_VIEW_CONTEXT.callMethod(\n                            'getAnimationPlayers',\n                            [\n                              _ANIMATION_FACTORY_ELEMENT_VAR,\n                              _ANIMATION_NEXT_STATE_VAR.equals(o.literal(EMPTY_STATE))\n                                  .conditional(o.NULL_EXPR, o.literal(this.animationName))\n                            ]))\n                        .toDeclStmt());\n\n    statements.push(_ANIMATION_COLLECTED_STYLES.set(_EMPTY_MAP).toDeclStmt());\n    statements.push(_ANIMATION_PLAYER_VAR.set(o.NULL_EXPR).toDeclStmt());\n    statements.push(_ANIMATION_TIME_VAR.set(o.literal(0)).toDeclStmt());\n\n    statements.push(\n        _ANIMATION_DEFAULT_STATE_VAR.set(this._statesMapVar.key(o.literal(DEFAULT_STATE)))\n            .toDeclStmt());\n\n    statements.push(\n        _ANIMATION_START_STATE_STYLES_VAR.set(this._statesMapVar.key(_ANIMATION_CURRENT_STATE_VAR))\n            .toDeclStmt());\n\n    statements.push(new o.IfStmt(\n        _ANIMATION_START_STATE_STYLES_VAR.equals(o.NULL_EXPR),\n        [_ANIMATION_START_STATE_STYLES_VAR.set(_ANIMATION_DEFAULT_STATE_VAR).toStmt()]));\n\n    statements.push(\n        _ANIMATION_END_STATE_STYLES_VAR.set(this._statesMapVar.key(_ANIMATION_NEXT_STATE_VAR))\n            .toDeclStmt());\n\n    statements.push(new o.IfStmt(\n        _ANIMATION_END_STATE_STYLES_VAR.equals(o.NULL_EXPR),\n        [_ANIMATION_END_STATE_STYLES_VAR.set(_ANIMATION_DEFAULT_STATE_VAR).toStmt()]));\n\n    const /** @type {?} */ RENDER_STYLES_FN = o.importExpr(createIdentifier(Identifiers.renderStyles));\n\n    ast.stateTransitions.forEach(transAst => statements.push(transAst.visit(this, context)));\n\n    // this check ensures that the animation factory always returns a player\n    // so that the onDone callback can be used for tracking\n    statements.push(new o.IfStmt(\n        _ANIMATION_PLAYER_VAR.equals(o.NULL_EXPR),\n        [_ANIMATION_PLAYER_VAR\n             .set(o.importExpr(createIdentifier(Identifiers.NoOpAnimationPlayer)).instantiate([]))\n             .toStmt()]));\n\n    // once complete we want to apply the styles on the element\n    // since the destination state's values should persist once\n    // the animation sequence has completed.\n    statements.push(\n        _ANIMATION_PLAYER_VAR\n            .callMethod(\n                'onDone',\n                [o\n                     .fn([],\n                         [\n                           _ANIMATION_PLAYER_VAR.callMethod('destroy', []).toStmt(),\n                           RENDER_STYLES_FN\n                               .callFn([\n                                 _ANIMATION_FACTORY_ELEMENT_VAR, _ANIMATION_FACTORY_RENDERER_VAR,\n                                 o.importExpr(\n                                      createIdentifier(Identifiers.prepareFinalAnimationStyles))\n                                     .callFn(\n                                         [\n                                           _ANIMATION_START_STATE_STYLES_VAR,\n                                           _ANIMATION_END_STATE_STYLES_VAR\n                                         ])\n                               ])\n                               .toStmt()\n                         ])])\n            .toStmt());\n\n    statements.push(o.importExpr(createIdentifier(Identifiers.AnimationSequencePlayer))\n                        .instantiate([_PREVIOUS_ANIMATION_PLAYERS])\n                        .callMethod('destroy', [])\n                        .toStmt());\n\n    // before we start any animation we want to clear out the starting\n    // styles from the element's style property (since they were placed\n    // there at the end of the last animation\n    statements.push(RENDER_STYLES_FN\n                        .callFn([\n                          _ANIMATION_FACTORY_ELEMENT_VAR, _ANIMATION_FACTORY_RENDERER_VAR,\n                          o.importExpr(createIdentifier(Identifiers.clearStyles))\n                              .callFn([_ANIMATION_START_STATE_STYLES_VAR])\n                        ])\n                        .toStmt());\n\n    statements.push(_ANIMATION_FACTORY_VIEW_CONTEXT\n                        .callMethod(\n                            'queueAnimation',\n                            [\n                              _ANIMATION_FACTORY_ELEMENT_VAR, o.literal(this.animationName),\n                              _ANIMATION_PLAYER_VAR\n                            ])\n                        .toStmt());\n\n    statements.push(new o.ReturnStatement(\n        o.importExpr(createIdentifier(Identifiers.AnimationTransition)).instantiate([\n          _ANIMATION_PLAYER_VAR, _ANIMATION_CURRENT_STATE_VAR, _ANIMATION_NEXT_STATE_VAR,\n          _ANIMATION_TIME_VAR\n        ])));\n\n    return o.fn(\n        [\n          new o.FnParam(\n              _ANIMATION_FACTORY_VIEW_VAR.name,\n              o.importType(createIdentifier(Identifiers.AppView), [o.DYNAMIC_TYPE])),\n          new o.FnParam(_ANIMATION_FACTORY_ELEMENT_VAR.name, o.DYNAMIC_TYPE),\n          new o.FnParam(_ANIMATION_CURRENT_STATE_VAR.name, o.DYNAMIC_TYPE),\n          new o.FnParam(_ANIMATION_NEXT_STATE_VAR.name, o.DYNAMIC_TYPE)\n        ],\n        statements, o.importType(createIdentifier(Identifiers.AnimationTransition)));\n  }\n/**\n * @param {?} ast\n * @return {?}\n */\nbuild(ast: AnimationAst): AnimationEntryCompileResult {\n    const /** @type {?} */ context = new _AnimationBuilderContext();\n    const /** @type {?} */ fnStatement = ast.visit(this, context).toDeclStmt(this._fnVarName);\n    const /** @type {?} */ fnVariable = o.variable(this._fnVarName);\n\n    const /** @type {?} */ lookupMap: any[] = [];\n    Object.keys(context.stateMap.states).forEach(stateName => {\n      const /** @type {?} */ value = context.stateMap.states[stateName];\n      let /** @type {?} */ variableValue = _EMPTY_MAP;\n      if (isPresent(value)) {\n        const /** @type {?} */ styleMap: any[] = [];\n        Object.keys(value).forEach(key => { styleMap.push([key, o.literal(value[key])]); });\n        variableValue = o.literalMap(styleMap, null, true);\n      }\n      lookupMap.push([stateName, variableValue]);\n    });\n\n    const /** @type {?} */ compiledStatesMapStmt =\n        this._statesMapVar.set(o.literalMap(lookupMap, null, true)).toDeclStmt();\n    const /** @type {?} */ statements: o.Statement[] = [compiledStatesMapStmt, fnStatement];\n\n    return new AnimationEntryCompileResult(this.animationName, statements, fnVariable);\n  }\n}\n\nfunction _AnimationBuilder_tsickle_Closure_declarations() {\n/** @type {?} */\n_AnimationBuilder.prototype._fnVarName;\n/** @type {?} */\n_AnimationBuilder.prototype._statesMapVarName;\n/** @type {?} */\n_AnimationBuilder.prototype._statesMapVar;\n/** @type {?} */\n_AnimationBuilder.prototype.animationName;\n}\n\nclass _AnimationBuilderContext {\n  stateMap = new _AnimationBuilderStateMap();\n  endStateAnimateStep: AnimationStepAst = null;\n  isExpectingFirstStyleStep = false;\n  isExpectingFirstAnimateStep = false;\n  totalTransitionTime = 0;\n}\n\nfunction _AnimationBuilderContext_tsickle_Closure_declarations() {\n/** @type {?} */\n_AnimationBuilderContext.prototype.stateMap;\n/** @type {?} */\n_AnimationBuilderContext.prototype.endStateAnimateStep;\n/** @type {?} */\n_AnimationBuilderContext.prototype.isExpectingFirstStyleStep;\n/** @type {?} */\n_AnimationBuilderContext.prototype.isExpectingFirstAnimateStep;\n/** @type {?} */\n_AnimationBuilderContext.prototype.totalTransitionTime;\n}\n\nclass _AnimationBuilderStateMap {\nprivate _states: {[key: string]: {[prop: string]: string | number}} = {};\n/**\n * @return {?}\n */\nget states() { return this._states; }\n/**\n * @param {?} name\n * @param {?=} value\n * @return {?}\n */\nregisterState(name: string, value: {[prop: string]: string | number} = null): void {\n    const /** @type {?} */ existingEntry = this._states[name];\n    if (!existingEntry) {\n      this._states[name] = value;\n    }\n  }\n}\n\nfunction _AnimationBuilderStateMap_tsickle_Closure_declarations() {\n/** @type {?} */\n_AnimationBuilderStateMap.prototype._states;\n}\n\n/**\n * @param {?} value\n * @param {?} animationState\n * @return {?}\n */\nfunction _compareToAnimationStateExpr(value: o.Expression, animationState: string): o.Expression {\n  const /** @type {?} */ emptyStateLiteral = o.literal(EMPTY_STATE);\n  switch (animationState) {\n    case EMPTY_STATE:\n      return value.equals(emptyStateLiteral);\n\n    case ANY_STATE:\n      return o.literal(true);\n\n    default:\n      return value.equals(o.literal(animationState));\n  }\n}\n/**\n * @param {?} step\n * @return {?}\n */\nfunction _isEndStateAnimateStep(step: AnimationAst): boolean {\n  // the final animation step is characterized by having only TWO\n  // keyframe values and it must have zero styles for both keyframes\n  if (step instanceof AnimationStepAst && step.duration > 0 && step.keyframes.length == 2) {\n    const /** @type {?} */ styles1 = _getStylesArray(step.keyframes[0])[0];\n    const /** @type {?} */ styles2 = _getStylesArray(step.keyframes[1])[0];\n    return Object.keys(styles1).length === 0 && Object.keys(styles2).length === 0;\n  }\n  return false;\n}\n/**\n * @param {?} obj\n * @return {?}\n */\nfunction _getStylesArray(obj: any): {[key: string]: any}[] {\n  return obj.styles.styles;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}