{"version":3,"file":"compile_method.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/view_compiler/compile_method.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport * as o from '../output/output_ast';\nimport {TemplateAst} from '../template_parser/template_ast';\n\nimport {CompileView} from './compile_view';\nclass _DebugState {\n/**\n * @param {?} nodeIndex\n * @param {?} sourceAst\n */\nconstructor(public nodeIndex: number,\npublic sourceAst: TemplateAst) {}\n}\n\nfunction _DebugState_tsickle_Closure_declarations() {\n/** @type {?} */\n_DebugState.prototype.nodeIndex;\n/** @type {?} */\n_DebugState.prototype.sourceAst;\n}\n\n\nconst /** @type {?} */ NULL_DEBUG_STATE = new _DebugState(null, null);\nexport class CompileMethod {\nprivate _newState: _DebugState = NULL_DEBUG_STATE;\nprivate _currState: _DebugState = NULL_DEBUG_STATE;\nprivate _debugEnabled: boolean;\nprivate _bodyStatements: o.Statement[] = [];\n/**\n * @param {?} _view\n */\nconstructor(private _view: CompileView) {\n    this._debugEnabled = this._view.genConfig.genDebugInfo;\n  }\n/**\n * @return {?}\n */\nprivate _updateDebugContextIfNeeded() {\n    if (this._newState.nodeIndex !== this._currState.nodeIndex ||\n        this._newState.sourceAst !== this._currState.sourceAst) {\n      const /** @type {?} */ expr = this._updateDebugContext(this._newState);\n      if (expr) {\n        this._bodyStatements.push(expr.toStmt());\n      }\n    }\n  }\n/**\n * @param {?} newState\n * @return {?}\n */\nprivate _updateDebugContext(newState: _DebugState): o.Expression {\n    this._currState = this._newState = newState;\n    if (this._debugEnabled) {\n      const /** @type {?} */ sourceLocation = newState.sourceAst ? newState.sourceAst.sourceSpan.start : null;\n\n      return o.THIS_EXPR.callMethod('debug', [\n        o.literal(newState.nodeIndex),\n        sourceLocation ? o.literal(sourceLocation.line) : o.NULL_EXPR,\n        sourceLocation ? o.literal(sourceLocation.col) : o.NULL_EXPR\n      ]);\n    } else {\n      return null;\n    }\n  }\n/**\n * @param {?} nodeIndex\n * @param {?} templateAst\n * @return {?}\n */\nresetDebugInfoExpr(nodeIndex: number, templateAst: TemplateAst): o.Expression {\n    const /** @type {?} */ res = this._updateDebugContext(new _DebugState(nodeIndex, templateAst));\n    return res || o.NULL_EXPR;\n  }\n/**\n * @param {?} nodeIndex\n * @param {?} templateAst\n * @return {?}\n */\nresetDebugInfo(nodeIndex: number, templateAst: TemplateAst) {\n    this._newState = new _DebugState(nodeIndex, templateAst);\n  }\n/**\n * @param {...?} stmts\n * @return {?}\n */\npush(...stmts: o.Statement[]) { this.addStmts(stmts); }\n/**\n * @param {?} stmt\n * @return {?}\n */\naddStmt(stmt: o.Statement) {\n    this._updateDebugContextIfNeeded();\n    this._bodyStatements.push(stmt);\n  }\n/**\n * @param {?} stmts\n * @return {?}\n */\naddStmts(stmts: o.Statement[]) {\n    this._updateDebugContextIfNeeded();\n    this._bodyStatements.push(...stmts);\n  }\n/**\n * @return {?}\n */\nfinish(): o.Statement[] { return this._bodyStatements; }\n/**\n * @return {?}\n */\nisEmpty(): boolean { return this._bodyStatements.length === 0; }\n}\n\nfunction CompileMethod_tsickle_Closure_declarations() {\n/** @type {?} */\nCompileMethod.prototype._newState;\n/** @type {?} */\nCompileMethod.prototype._currState;\n/** @type {?} */\nCompileMethod.prototype._debugEnabled;\n/** @type {?} */\nCompileMethod.prototype._bodyStatements;\n/** @type {?} */\nCompileMethod.prototype._view;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}